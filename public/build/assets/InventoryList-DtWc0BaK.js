import{r as m,s as p,j as L,w,h as N,o as u,b as e,a as l,c as b,e as M,d as D,f as R,v as O,t as d}from"./app-CZQl4fZc.js";import{_ as P}from"./PaginationLink-DSVq8sdB.js";import{M as T,f as z}from"./MainLayout-BGbuSmps.js";import{d as G}from"./index-C71Kd9IX.js";import{_ as S}from"./Modal-CuE3Y__x.js";import{a as v,b as x,_ as c}from"./TextInput-CnQTIPJ3.js";import{_ as H}from"./Select-DAAn4NG7.js";import"./ApplicationLogo-kcz6Xb7Y.js";import"./NavLink-BMIoQkOQ.js";import"./Flash-Bwnt55Qo.js";const J={class:"p-3"},K={action:"",class:"px-4 py-2"},W={class:"grid grid-cols-2 gap-2"},X={class:"flex justify-between mt-1"},Y={class:"item-center place-items-center pt-3"},Z=["onClick"],ee={action:"",class:"px-4 py-2"},te={class:"flex justify-between mt-1"},se={class:"flex justify-between mt-1"},le={class:"flex justify-between mt-1"},oe={class:"overflow-auto rounded-lg shadow"},ae={class:"w-full"},ie={class:"bg-gray-50 border-b-2 border-gray-200"},ne={width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},re={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},de={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},me={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ue={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ce={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ke={__name:"InventoryList",props:{lists:Array},setup(y){const{transformValidationErrors:h}=z(),g=m(!1),k=m(!1),f=()=>{j(),g.value=!1,k.value=!1},I=m({}),n=m({item_pid:"",cause:"",date:"",qnt:0,quantity:0});U();function U(){p.dispatch("loadDropdown","item-names").then(({data:t})=>{I.value=t}).catch(t=>{console.log(t)})}const Q=t=>{G.Inertia.get(t,{},{preserveState:!0,preserveScroll:!0})},a=m({items:[{item_pid:"",quantity:""}],errors:{}}),j=()=>{a.value={items:[{item_pid:"",quantity:""}],errors:{}}},A=()=>{a.value.items.push({item_pid:"",quantity:""})},B=t=>{if(a.value.items.length===1){p.commit("notify",{message:"One Item is required to proceed",type:"warning"});return}a.value.items.splice(t,1)},E=()=>{a.errors={},p.dispatch("postMethod",{url:"/add-inventory-item",param:a.value}).then(t=>{(t==null?void 0:t.status)==422?a.value.errors=h(t.data):(t==null?void 0:t.status)==201&&f()}).catch(t=>{console.log(t)})},F=()=>{a.errors={},p.dispatch("postMethod",{url:"/remove-damage-item",param:n.value}).then(t=>{(t==null?void 0:t.status)==422?a.value.errors=h(t.data):(t==null?void 0:t.status)==201&&f()}).catch(t=>{console.log(t)})};return(t,s)=>{const _=N("font-awesome-icon");return u(),L(T,null,{default:w(()=>{var V;return[e("div",J,[l(S,{show:g.value,onClose:f,title:"Add Item Quantity ",onSubmit:E},{default:w(()=>[e("form",K,[(u(!0),b(D,null,M(a.value.items,(o,i)=>(u(),b("div",{class:"",key:i},[e("div",W,[e("div",null,[l(H,{modelValue:o.item_pid,"onUpdate:modelValue":r=>o.item_pid=r,label:"Item name",placeholder:"Select item",options:I.value},null,8,["modelValue","onUpdate:modelValue","options"]),l(c,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])]),e("div",null,[l(v,{for:"feeder",value:"Item Quantity"}),e("div",X,[l(x,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:o.quantity,"onUpdate:modelValue":r=>o.quantity=r,required:"",placeholder:"e.g 120"},null,8,["modelValue","onUpdate:modelValue"]),e("div",Y,[e("button",{class:"bg-yellow-500 text-white btn-sm",type:"button",onClick:r=>B(i)},[l(_,{icon:"fa-solid fa-minus-circle"})],8,Z)])]),l(c,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])])])]))),128)),e("button",{class:"bg-blue-500 text-white btn-sm mt-1",type:"button",onClick:A},[l(_,{icon:"fa-solid fa-plus-circle"})])])]),_:1},8,["show"]),l(S,{show:k.value,onClose:f,"max-width":"sm",title:"Remove Damage Item ",onSubmit:F},{default:w(()=>[e("form",ee,[e("div",null,[l(v,{for:"feeder",value:"Item Quantity"}),e("div",te,[l(x,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:n.value.quantity,"onUpdate:modelValue":s[0]||(s[0]=o=>n.value.quantity=o),required:"",placeholder:"e.g 120"},null,8,["modelValue"])]),l(c,{class:"mt-2",message:a.value.errors.quantity},null,8,["message"])]),e("div",null,[l(v,{for:"feeder",value:"Item Quantity"}),e("div",se,[l(x,{id:"feeder33",type:"date",class:"mt-1 block w-full",modelValue:n.value.date,"onUpdate:modelValue":s[1]||(s[1]=o=>n.value.date=o)},null,8,["modelValue"])]),l(c,{class:"mt-2",message:a.value.errors.date},null,8,["message"])]),e("div",null,[l(v,{for:"feeder",value:"Cause of Damage"}),e("div",le,[R(e("textarea",{id:"feeder33",type:"text",class:"mt-1 block w-full","onUpdate:modelValue":s[2]||(s[2]=o=>n.value.cause=o),required:"",placeholder:"e.g tamper"},null,512),[[O,n.value.cause]])]),l(c,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])])])]),_:1},8,["show"]),e("button",{onClick:s[3]||(s[3]=o=>g.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Item")]),e("div",oe,[e("table",ae,[e("thead",ie,[e("tr",null,[s[5]||(s[5]=e("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[6]||(s[6]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Region ",-1)),s[7]||(s[7]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Item",-1)),s[8]||(s[8]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"description",-1)),s[9]||(s[9]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Quantity",-1)),e("th",ne,[l(_,{class:"fa-solid fas fa-cog"})])])]),e("tbody",null,[(u(!0),b(D,null,M((V=y.lists)==null?void 0:V.data,(o,i)=>{var r,q,C,$;return u(),b("tr",{class:"bg-white",key:i},[e("td",re,d(i+1),1),e("td",de,d((r=o.region)==null?void 0:r.name),1),e("td",me,d((q=o.item)==null?void 0:q.name),1),e("td",ue,d((C=o.item)==null?void 0:C.description),1),e("td",ce,d(o.quantity)+" "+d(($=o.item)==null?void 0:$.unit),1),s[10]||(s[10]=e("td",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},null,-1))])}),128))])]),e("div",null,[l(P,{onAction:s[4]||(s[4]=o=>{var i;return Q((i=y.lists)==null?void 0:i.next_page_url)}),pages:t.links},null,8,["pages"])])])]}),_:1})}}};export{ke as default};
