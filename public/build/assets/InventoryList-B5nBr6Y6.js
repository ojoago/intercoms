import{r as d,s as p,j as F,w,h as L,o as m,b as e,a as l,c as b,e as $,d as M,f as N,v as O,t as u}from"./app-BgjM27J2.js";import{_ as P}from"./PaginationLink-CcAG_FhN.js";import{M as R,f as T}from"./MainLayout-CkICp5eG.js";import{d as z}from"./index-CwrUzRYe.js";import{_ as D}from"./Modal-Cg8G8UH_.js";import{a as v,b as y,_ as c}from"./TextInput-liTHpQxj.js";import{_ as G}from"./Select-D01AvsGR.js";import"./ApplicationLogo-CwRuwOZI.js";import"./NavLink-BTDbD6vd.js";import"./Flash-Lc3pXEbU.js";const H={class:"p-3"},J={action:"",class:"px-4 py-2"},K={class:"grid grid-cols-2 gap-2"},W={class:"flex justify-between mt-1"},X={class:"item-center place-items-center pt-3"},Y=["onClick"],Z={action:"",class:"px-4 py-2"},ee={class:"flex justify-between mt-1"},te={class:"flex justify-between mt-1"},se={class:"flex justify-between mt-1"},le={class:"overflow-auto rounded-lg shadow"},oe={class:"w-full"},ae={class:"bg-gray-50 border-b-2 border-gray-200"},ie={width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ne={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},re={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},de={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},me={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},he={__name:"InventoryList",props:{lists:Array},setup(h){const{transformValidationErrors:x}=T(),g=d(!1),k=d(!1),f=()=>{Q(),g.value=!1,k.value=!1},I=d({}),n=d({item_pid:"",cause:"",date:"",qnt:0,quantity:0});S();function S(){p.dispatch("loadDropdown","item-names").then(({data:t})=>{I.value=t}).catch(t=>{console.log(t)})}const U=t=>{z.Inertia.get(t,{},{preserveState:!0,preserveScroll:!0})},a=d({items:[{item_pid:"",quantity:""}],errors:{}}),Q=()=>{a.value={items:[{item_pid:"",quantity:""}],errors:{}}},j=()=>{a.value.items.push({item_pid:"",quantity:""})},A=t=>{if(a.value.items.length===1){p.commit("notify",{message:"One Item is required to proceed",type:"warning"});return}a.value.items.splice(t,1)},B=()=>{a.errors={},p.dispatch("postMethod",{url:"/add-inventory-item",param:a.value}).then(t=>{(t==null?void 0:t.status)==422?a.value.errors=x(t.data):(t==null?void 0:t.status)==201&&f()}).catch(t=>{console.log(t)})},E=()=>{a.errors={},p.dispatch("postMethod",{url:"/remove-damage-item",param:n.value}).then(t=>{(t==null?void 0:t.status)==422?a.value.errors=x(t.data):(t==null?void 0:t.status)==201&&f()}).catch(t=>{console.log(t)})};return(t,s)=>{const _=L("font-awesome-icon");return m(),F(R,null,{default:w(()=>{var V;return[e("div",H,[l(D,{show:g.value,onClose:f,title:"Add Item Quantity ",onSubmit:B},{default:w(()=>[e("form",J,[(m(!0),b(M,null,$(a.value.items,(o,i)=>(m(),b("div",{class:"",key:i},[e("div",K,[e("div",null,[l(G,{modelValue:o.item_pid,"onUpdate:modelValue":r=>o.item_pid=r,label:"Item name",placeholder:"Select item",options:I.value},null,8,["modelValue","onUpdate:modelValue","options"]),l(c,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])]),e("div",null,[l(v,{for:"feeder",value:"Item Quantity"}),e("div",W,[l(y,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:o.quantity,"onUpdate:modelValue":r=>o.quantity=r,required:"",placeholder:"e.g 120"},null,8,["modelValue","onUpdate:modelValue"]),e("div",X,[e("button",{class:"bg-yellow-500 text-white btn-sm",type:"button",onClick:r=>A(i)},[l(_,{icon:"fa-solid fa-minus-circle"})],8,Y)])]),l(c,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])])])]))),128)),e("button",{class:"bg-blue-500 text-white btn-sm mt-1",type:"button",onClick:j},[l(_,{icon:"fa-solid fa-plus-circle"})])])]),_:1},8,["show"]),l(D,{show:k.value,onClose:f,"max-width":"sm",title:"Remove Damage Item ",onSubmit:E},{default:w(()=>[e("form",Z,[e("div",null,[l(v,{for:"feeder",value:"Item Quantity"}),e("div",ee,[l(y,{id:"feeder33",type:"text",class:"mt-1 block w-full",modelValue:n.value.quantity,"onUpdate:modelValue":s[0]||(s[0]=o=>n.value.quantity=o),required:"",placeholder:"e.g 120"},null,8,["modelValue"])]),l(c,{class:"mt-2",message:a.value.errors.quantity},null,8,["message"])]),e("div",null,[l(v,{for:"feeder",value:"Item Quantity"}),e("div",te,[l(y,{id:"feeder33",type:"date",class:"mt-1 block w-full",modelValue:n.value.date,"onUpdate:modelValue":s[1]||(s[1]=o=>n.value.date=o)},null,8,["modelValue"])]),l(c,{class:"mt-2",message:a.value.errors.date},null,8,["message"])]),e("div",null,[l(v,{for:"feeder",value:"Cause of Damage"}),e("div",se,[N(e("textarea",{id:"feeder33",type:"text",class:"mt-1 block w-full","onUpdate:modelValue":s[2]||(s[2]=o=>n.value.cause=o),required:"",placeholder:"e.g tamper"},null,512),[[O,n.value.cause]])]),l(c,{class:"mt-2",message:a.value.errors.feeder},null,8,["message"])])])]),_:1},8,["show"]),e("button",{onClick:s[3]||(s[3]=o=>g.value=!0),class:"bg-optimal text-white p-1 mb-2 rounded"},"Add Item")]),e("div",le,[e("table",oe,[e("thead",ae,[e("tr",null,[s[5]||(s[5]=e("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[6]||(s[6]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Item",-1)),s[7]||(s[7]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"description",-1)),s[8]||(s[8]=e("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Quantity",-1)),e("th",ie,[l(_,{icon:"fa-solid fas fa-cog"})])])]),e("tbody",null,[(m(!0),b(M,null,$((V=h.lists)==null?void 0:V.data,(o,i)=>{var r,q,C;return m(),b("tr",{class:"bg-white",key:i},[e("td",ne,u(i+1),1),e("td",re,u((r=o.item)==null?void 0:r.name),1),e("td",de,u((q=o.item)==null?void 0:q.description),1),e("td",me,u(o.quantity)+" "+u((C=o.item)==null?void 0:C.unit),1),s[9]||(s[9]=e("td",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},null,-1))])}),128))])]),e("div",null,[l(P,{onAction:s[4]||(s[4]=o=>{var i;return U((i=h.lists)==null?void 0:i.next_page_url)}),pages:t.links},null,8,["pages"])])])]}),_:1})}}};export{he as default};
