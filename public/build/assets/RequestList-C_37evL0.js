import{M as U,f as E}from"./MainLayout-BVskpbb1.js";import{r as n,c as i,a as l,u as v,w,d as p,s as c,o as u,Z as L,b as t,e as k,F as N,t as d}from"./app-BNp7rAcT.js";import{_ as B}from"./Modal-DUS6ZOB2.js";import{_ as y,a as j,b as A}from"./TextInput-C_NiXmEO.js";import{_ as Q}from"./Select-CvkmWdpW.js";import"./ApplicationLogo-DG8JRCA7.js";import"./NavLink-ClC5_1O0.js";import"./Flash-DRcf4ctM.js";const T={action:"",class:"px-4 py-2"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},z={class:"flex flex-col"},G={class:"flex flex-col"},H={class:"overflow-auto rounded-lg shadow mt-3"},J={class:"w-full"},K={class:"bg-gray-50 border-b-2 border-gray-200"},O={width:"10%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},P={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},W={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},X={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},Y={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},ee={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},te={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},se={class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered flex"},oe=["onClick"],le=["onClick"],pe={__name:"RequestList",setup(ae){const{transformValidationErrors:q}=E(),f=n(!1),b=()=>{I(),f.value=!1},a=n({date:"",receiver:"",note:"",team:"",items:[{item_pid:"",quantity:""}],errors:{}});function V(){a.errors={},c.dispatch("postMethod",{url:"/request-item",param:a.value}).then(e=>{(e==null?void 0:e.status)==422?a.value.errors=q(e.data):(e==null?void 0:e.status)==201&&(b(),h())}).catch(e=>{console.log(e)})}const I=()=>{a.value={state:"",region:"",errors:{}}},R=e=>{a.value={date:e.date,receiver:e.receiver,team:e.team_pid,items:e.items,note:e.note,pid:e.pid,errors:{}},f.value=!0},_=n({});function h(e="load-request-list"){c.dispatch("getMethod",{url:e}).then(s=>{(s==null?void 0:s.status)==200&&(_.value=s.data)}).catch(s=>{console.log(s)})}h();const $=n({});function C(){c.dispatch("loadDropdown","teams/").then(({data:e})=>{$.value=e}).catch(e=>{console.log(e)})}C();const M=n({});function D(){c.dispatch("loadDropdown","users/").then(({data:e})=>{M.value=e}).catch(e=>{console.log(e)})}D();const x=n({});function F(){c.dispatch("loadDropdown","item-quantity").then(({data:e})=>{x.value=e}).catch(e=>{console.log(e)})}return F(),(e,s)=>(u(),i(p,null,[l(v(L),{title:"Item Request List"}),l(U,null,{default:w(()=>[l(B,{show:f.value,onClose:b,title:"Request Item",onSubmit:V},{default:w(()=>[t("form",T,[s[0]||(s[0]=t("hr",{class:"mt-2"},null,-1)),(u(!0),i(p,null,k(a.value.items,(o,m)=>(u(),i("div",{class:"",key:m},[t("div",Z,[t("div",z,[l(Q,{modelValue:o.item_pid,"onUpdate:modelValue":r=>o.item_pid=r,label:"Items",placeholder:"Select Item",options:x.value},null,8,["modelValue","onUpdate:modelValue","options"]),l(y,{class:"mt-2",message:a.value.errors.team},null,8,["message"])]),t("div",G,[l(j,{for:"quantity",value:"Quantity"}),l(A,{id:"date",type:"number",step:"0.5",class:"mt-1 block w-full",modelValue:o.quantity,"onUpdate:modelValue":r=>o.quantity=r,placeholder:"Enter Quantity",required:""},null,8,["modelValue","onUpdate:modelValue"]),l(y,{class:"mt-2",message:a.value.errors.quantity},null,8,["message"])])])]))),128))])]),_:1},8,["show"]),s[7]||(s[7]=t("div",null,null,-1)),t("div",H,[t("table",J,[t("thead",K,[t("tr",null,[s[1]||(s[1]=t("th",{width:"5%",class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"S/N",-1)),s[2]||(s[2]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Date",-1)),s[3]||(s[3]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Items",-1)),s[4]||(s[4]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Team",-1)),s[5]||(s[5]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Status",-1)),s[6]||(s[6]=t("th",{class:"p-3 text-sm font-semibold tracking-wide text-left table-bordered"},"Receiver",-1)),t("th",O,[l(v(N),{icon:"fa-solid fa fa-cog"})])])]),t("tbody",null,[(u(!0),i(p,null,k(_.value,(o,m)=>{var r,g;return u(),i("tr",{class:"bg-white",key:m},[t("td",P,d(m+1),1),t("td",W,d(o.date_requested),1),t("td",X,d(o.items_count),1),t("td",Y,d((r=o==null?void 0:o.team)==null?void 0:r.team),1),t("td",ee,d(o.request_status),1),t("td",te,d((g=o==null?void 0:o.collector)==null?void 0:g.username),1),t("td",se,[t("button",{class:"p-1 oy-1 text-sm bg-red-500 text-white me-2 inline-block",onClick:S=>e.rejectRequest(o.pid)},"Reject",8,oe),t("button",{class:"p-1 oy-1 text-sm bg-optimal text-white me-2 inline-block",onClick:S=>R(o)},"Approve",8,le)])])}),128))])])])]),_:1})],64))}};export{pe as default};
